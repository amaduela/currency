<!DOCTYPE html>
<html>
<head>
	<!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Taxa(s) de Cambio</title>

	<link rel="stylesheet" type="text/css" href="dist/css/style.css">
</head>
<body>
	<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark">
		<div class="container">
			<a class="navbar-brand mr-auto mr-lg-0" href="#">Currency in Moz</a>
			<button class="navbar-toggler p-0 border-0" type="button" data-toggle="offcanvas">
				<span class="navbar-toggler-icon"></span>
			</button>

			<!-- <div class="navbar-collapse offcanvas-collapse">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
					</li>
				</ul>
			</div> -->
		</div>
	</nav>

	<main role="main" class="container">
		<div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
			<h1 class="display-4">Welcome</h1>
			<p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Recusandae eaque, doloribus qui ullam necessitatibus deleniti architecto odit eum ad tempora, vitae porro assumenda magni. Voluptatem cum assumenda deleniti nostrum voluptas.</p>
			</div>
		<div class="row">
			<div class="col-md-3 bg-white rounded box-shadow">
				<h6 class="">Milennium Bim</h6>
				<div class="media text-muted pt-3">
					<table class="table table-striped">
						<thead>
							<th>Moeda</th>
							<th>Compra</th>
							<th>Venda</th>
						</thead>
						<tbody id="bim">
						</tbody>
					</table>
				</div>
			</div>
			<div class="col-md-3 bg-white rounded box-shadow">
				<h6 class="">Banco Unico</h6>
				<div class="media text-muted pt-3">
					<table class="table table-striped">
						<thead>
							<th>Moeda</th>
							<th>Compra</th>
							<th>Venda</th>
						</thead>
						<tbody id="unico">
						</tbody>
					</table>
				</div>
			</div>
			<div class="col-md-3 bg-white rounded box-shadow">
				<h6 class="">Standard Bank</h6>
				<div class="media text-muted pt-3">
					<table class="table table-striped">
						<thead>
							<th>Moeda</th>
							<th>Compra</th>
							<th>Venda</th>
						</thead>
						<tbody id="standard">
						</tbody>
					</table>
				</div>
			</div>
			<div class="col-md-3 bg-white rounded box-shadow">
				<h6 class="">BCI</h6>
				<div class="media text-muted pt-3">
					<table class="table table-striped">
						<thead>
							<th>Moeda</th>
							<th>Compra</th>
							<th>Venda</th>
						</thead>
						<tbody id="bci">
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</main>
	<script type="text/javascript">
		function createTR (origin, data) {
			var table = document.querySelector("#"+origin);
			var tr = document.createElement("tr");
			var tdBuy = document.createElement("td");
			var tdSell = document.createElement("td");
			var tdCurrency = document.createElement("td");

			tdCurrency.textContent = data.name;
			tdBuy.textContent = data.buy;
			tdSell.textContent = data.sell;

			tr.appendChild(tdCurrency);
			tr.appendChild(tdBuy);
			tr.appendChild(tdSell);

			table.appendChild(tr);
		}

		function bank(name) {
			var xhr = new XMLHttpRequest();
			var bim = "http://benchambule.ml/bankin/bankin.php?service=xr&bank=bim",
				bci = "http://benchambule.ml/bankin/bankin.php?service=xr&bank=bci",
				unico = "http://benchambule.ml/bankin/bankin.php?service=xr&bank=unico",
				standard = "http://benchambule.ml/bankin/bankin.php?service=xr&bank=standard",
				url = "";

			if(name == "bim"){
				url = bim;
			}
			else if (name == "bci"){
				url = bci;
			}
			else if (name == "standard"){
				url = standard;
			}
			else if (name == "unico"){
				url = unico;
			}

			xhr.open("GET", "./dist/json/"+name);

			xhr.addEventListener("load", function () {
				if (xhr.status == 200) {
					var result = xhr.responseText;
					var data = JSON.parse(result);
					console.log(data);

					for(var i in data){
						createTR(name, data[i]);
					}
				}
			});
			xhr.send();
		}
		bank("bim");
		bank("bci");
		bank("unico");
		bank("standard");
	</script>
</body>
</html>